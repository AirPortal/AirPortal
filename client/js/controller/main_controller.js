"use strict";app.controller("mainController",["$scope","$timeout","$location","login","Upload","ticket",function(e,t,i,n,o,l){e.ui={selectFileOpen:!1,enterFlightOpen:!1,imageUploaded:!1},e.uiFx={resetButtons:function(){e.ui.selectFileOpen=!1,e.ui.enterFlightOpen=!1}},e.model={file:null,ticketNumber:""},e.dialog={selectFile:function(){e.ui.selectFileOpen=!0,e.ui.enterFlightOpen=!1},inputFlight:function(){e.ui.selectFileOpen=!1,e.ui.enterFlightOpen=!0}},e.form={uploadFiles:function(t,n){e.f=t,e.errFile=n&&n[0],t&&o.upload({url:"/upload",data:{profileImage:t},method:"POST"}).then(function(e){console.log("Success "+e.config.data.profileImage.name+"uploaded. Response: "+JSON.stringify(e.data)),l.storeTicket(e.data.data),i.path("/dashboard")},function(e){console.log("Error status: "+e.status)})},submitFlightNumber:function(){n.loginWithTicket(e.model.ticketNumber).then(function(e){"OK"===e&&t(function(){i.path("/dashboard")})})}}}]);